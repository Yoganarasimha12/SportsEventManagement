<div className="premium-info-approval">

  {/* Card Details Header */}
  <div id="progress-card-header" className="mb-3">
    <h5>Credit Card Details</h5>
  </div>

  {/* INFO + CARD VISUAL SIDE BY SIDE */}
  <div className="d-flex justify-content-between align-items-start">
    {/* LEFT SIDE: Info */}
    <div className="premium-info-left" style={{ flex: 1 }}>
      <div className="d-flex justify-content-start py-2">
        <div className="premium-info-row">
          <span className="label">Card Type:</span>
          <span className="value">{applicationInfo.card_type || "-"}</span>
        </div>
      </div>

      <div className="d-flex justify-content-between py-2">
        <div className="premium-info-row me-5">
          <span className="label">Credit Limit:</span>
          <span className="value">
            {rules.creditLimit
              ? `Rs. ${rules.creditLimit.toLocaleString()}`
              : "Rs.-"}
          </span>
        </div>

        <div className="premium-info-row">
          <span className="label">Interest Rate:</span>
          <span className="value">
            {rules.interestRate ? `${rules.interestRate}%` : "--"}
          </span>
        </div>
      </div>

      {/* Approved Badge */}
      {isApproved && (
        <div className="approval-status-badge mt-3 mb-2 text-success fw-semibold">
          <i className="bi bi-check-circle-fill me-2"></i>
          Approved
        </div>
      )}
    </div>

    {/* RIGHT SIDE: Credit Card Visual (only when approved) */}
    <div
      className="premium-card-visual ms-3"
      style={{
        flex: "0 0 330px",
        minHeight: "220px",
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      {isApproved ? (
        <div className="credit-card-ui">
          <div className="bank-logo">
            <img
              src="/Asset/Logos/try_scb_logo.png"
              alt="Standard Chartered"
            />
          </div>
          <div className="chip"></div>
          <div className="cc-number">
            {cardInfo.cardNumber || "XXXX-XXXX-XXXX-0123"}
          </div>
          <div className="cc-footer">
            <span className="cc-holder">{fullName}</span>
            <span className="cc-expiry">
              {cardInfo.expiryDate
                ? `Valid: ${cardInfo.expiryDate.slice(5, 7)}/${cardInfo.expiryDate.slice(2, 4)}`
                : "Valid: --/--"}
            </span>
          </div>
        </div>
      ) : (
        <div style={{ width: "100%", height: "100%" }}></div>
      )}
    </div>
  </div>

  {/* BELOW: CARD DETAILS SECTION */}
  {isApproved && (
    <div className="premium-card-section mt-5">
      <div className="premium-layout">
        {/* RIGHT INFO BOX (unchanged) */}
        <div className="premium-info-box">
          <div className="premium-info-row">
            <span className="label">Card Type:</span>
            <span className="value">{cardInfo.card_type || "-"}</span>
          </div>

          <div className="premium-info-row">
            <span className="label">Issued Date:</span>
            <span className="value">
              {cardInfo.generatedAt
                ? cardInfo.generatedAt.slice(0, 10)
                : "-"}
            </span>
          </div>

          <div className="premium-info-row">
            <span className="label">Status:</span>
            <span className="value">
              {cardInfo.cardStatus || "-"}
            </span>
          </div>
        </div>
      </div>
    </div>
  )}

  {/* ACTION BUTTONS */}
  <div className="action-btn-container mt-4">
    <button className="premium-btn email-btn" onClick={handleOpenEmailModal}>
      Draft Email
    </button>

    <FinalDraftEmailModal
      show={showEmailModal}
      handleClose={handleCloseEmailModal}
      emailModalData={emailModalData}
      applicationId={applicationId}
      onPrintInitiated={(status) =>
        setCardInfo((prev) => ({ ...prev, deliveryStatus: status }))
      }
    />

    {!isApproved && !isRejected && (
      <div className="button-group mt-3">
        <button className="accept-btn me-2" onClick={handleAccept}>
          Accept
        </button>
        <button className="reject-btn" onClick={handleReject}>
          Reject
        </button>
      </div>
    )}
  </div>

  {/* POPUP CONFIRM MODAL */}
  {showPopup && (
    <div className="popup-overlay">
      <div className="popup-box">
        <strong>Confirm Final Approval</strong>
        <p>
          By clicking <strong>Confirm</strong>, you are confirming the Credit
          Card is <strong>Ready to Issue.</strong>
        </p>
        <div className="popup-buttons">
          <button className="confirm-btn" onClick={handleConfirm}>
            Confirm
          </button>
          <button className="cancel-1-btn" onClick={handleCancel}>
            Cancel
          </button>
        </div>
      </div>
    </div>
  )}

  {/* REJECTED SECTION */}
  {isRejected && (
    <div className="action-btn-container mt-4">
      <button className="premium-btn email-btn" onClick={handleOpenEmailModal}>
        Draft Email
      </button>
      <FinalDraftEmailModal
        show={showEmailModal}
        handleClose={handleCloseEmailModal}
        emailModalData={{
          creditStatus: "Rejected",
          customerName: fullName,
          card_type: applicationInfo?.card_type,
          deliveryStatus: cardInfo?.deliveryStatus,
        }}
        applicationId={applicationId}
      />
    </div>
  )}
</div>